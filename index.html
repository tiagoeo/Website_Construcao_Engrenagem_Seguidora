<!DOCTYPE html>
<!--
	Trattec Informática - trattecinformatica.com.br
	Tiago Oliveira (tiago@trattecinformatica.com.br)
-->
    <head>
        <meta http-equiv="content-type" content="text/html; charset=UTF-8">
        <meta charset="utf-8">
        <meta name="author" content="Tiago Oliveira">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
        
        <title> Página em construção </title>
        <meta name="google" content="notranslate">
        <meta name="theme-color" content="#563d7c">
        <link rel="stylesheet" type="text/css" href="static/css/engrenagem.css" />
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD" crossorigin="anonymous">
    </head>

	<body onclick="local(event);">
        <div class="px-4 py-5 my-5 text-center">
            <h1 class="display-5 fw-bold">Website em construção</h1>
            <div class="col-lg-6 mx-auto">
              <p class="lead mb-4">Este site está em construção, pela empresa Trattec Informática.</p>
              <div class="d-grid gap-2 d-sm-flex justify-content-sm-center">
                <button type="button" class="btn btn-outline-secondary btn-lg px-4" onclick="contato()">Contate-nos</button>
              </div>
            </div>
        </div>
       
        <div class="spinner animado" role="status" id="engrenagem">
            <img src="static/img/engrenagem.png" alt="engrenagem" height="84" width="84">
        </div>

        <div class="cursor" role="status" id="cursor">
            <img src="static/img/cursor.png" alt="cursor" height="84" width="84">
        </div>

        <div class="container marketing my-2 p-3 bg-white rounded shadow-sm">
            <label for="basic-url" class="form-label">Cursor</label>
            <div class="input-group mb-3">
                <span class="input-group-text" id="cursorX">X</span>
                <input type="text" class="form-control" aria-describedby="cursorX" id="crX">
                <span class="input-group-text" id="cursorY">Y</span>
                <input type="text" class="form-control" aria-describedby="cursorY" id="crY">
            </div>

            <label for="basic-url" class="form-label">Engrenagem</label>
            <div class="input-group mb-3">
                <span class="input-group-text" id="engrenagemX">X</span>
                <input type="text" class="form-control" aria-describedby="engrenagemX" id="enX">
                <span class="input-group-text" id="engrenagemY">Y</span>
                <input type="text" class="form-control" aria-describedby="engrenagemY" id="enY">
            </div>
        </div>

        <div class="container marketing my-2 p-3 bg-white rounded shadow-sm">
            <table class="table">
                <thead>
                <tr>
                    <th scope="col">Sevidor</th>
                    <th scope="col">Status</th>
                </tr>
                </thead>
                <tbody>
                <tr>
                    <th scope="row">PHP</th>
                    <td id="testePHP">Falha</td>
                </tr>
                <tr>
                    <th scope="row" >CSS3</th>
                    <td id="testeCSS3">Falha</td>
                </tr>
                <tr>
                    <th scope="row">Javascript</th>
                    <td id="testeJavascript">Falha</td>
                </tr>
                </tbody>
            </table>
        </div>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js" integrity="sha384-w76AqPfDkMBDXo30jS1Sgez6pr3x5MlQ1ZAGC+nuZB+EYdgRZgiwxhTBTkF7CXvN" crossorigin="anonymous"></script>

        <script>
            function contato()
            {
                location.href = "https://www.trattecinformatica.com.br";
            } 

            function local(event, duracao) {
                clearInterval(id);
                var engrenagem = document.getElementById('engrenagem');
                var cursor = document.getElementById('cursor');
                
                let cX = event.clientX
                let cY = event.clientY
                cursor.style.left = cX - (40) + "px";
                cursor.style.top = cY - (40) + "px";

                var left = engrenagem.getBoundingClientRect().left;
                var top = engrenagem.getBoundingClientRect().top;

                function mover() {
                    if (engrenagem.getBoundingClientRect().left < cursor.getBoundingClientRect().left){
                        left++;
                    }else if (engrenagem.getBoundingClientRect().left > cursor.getBoundingClientRect().left){
                        left--;
                    }

                    if (engrenagem.getBoundingClientRect().top < cursor.getBoundingClientRect().top){
                        top++;
                    }else if (engrenagem.getBoundingClientRect().top > cursor.getBoundingClientRect().top){
                        top--;
                    }
                    
                    engrenagem.style.left = left + 'px';
                    engrenagem.style.top = top + 'px';
                    if (engrenagem.getBoundingClientRect().left >= 2500 || engrenagem.getBoundingClientRect().left <= -100 || engrenagem.getBoundingClientRect().top >= 2500 || engrenagem.getBoundingClientRect().top <= -100){
                        clearInterval(id);
                        engrenagem.style.left = 50 + '%';
                        engrenagem.style.top = 10 + 'px';
                    }

                    if (engrenagem.getBoundingClientRect().left == cursor.getBoundingClientRect().left && engrenagem.getBoundingClientRect().top == cursor.getBoundingClientRect().top){
                        clearInterval(id);
                    }

                    document.getElementById("crX").value = cursor.getBoundingClientRect().left;
                    document.getElementById("crY").value = cursor.getBoundingClientRect().top;
                    document.getElementById("enX").value = engrenagem.getBoundingClientRect().left;
                    document.getElementById("enY").value = engrenagem.getBoundingClientRect().top;
                }
                var id = setInterval(mover, 10);
            }

            function testePHP(){
                const baseurl = 'transmitir.php'
                const testePHP = 'testePHP';
                sendRequest(baseurl, testePHP);
            }

            /* Adaptado do exemplo: https://www.quirksmode.org/js/xmlhttp.html */
            function sendRequest(url, postData) {
                var req = createXMLHTTPObject();
                if (!req) return;
                var method = (postData) ? "POST" : "GET";
                req.open(method,url,true);
                req.setRequestHeader('User-Agent','XMLHTTP/1.0');
                if (postData)
                    req.setRequestHeader('Content-type','application/x-www-form-urlencoded; charset=UTF-8');
                req.onreadystatechange = function () {
                    if (req.readyState != 4) return;
                    if (req.status != 200 && req.status != 304) {
                        return;
                    }
                    if (req.readyState == 4) {
                        var teste = document.getElementById('testePHP');
                        teste.innerHTML = req.responseText;
                        return req.responseText;
                    }
                }
                if (req.readyState == 4) return;
                req.send(postData);
            }

            var XMLHttpFactories = [
                function () {return new XMLHttpRequest()},
                function () {return new ActiveXObject("Msxml2.XMLHTTP")},
                function () {return new ActiveXObject("Msxml3.XMLHTTP")},
                function () {return new ActiveXObject("Microsoft.XMLHTTP")}
            ];

            function createXMLHTTPObject() {
                var xmlhttp = false;
                for (var i=0;i<XMLHttpFactories.length;i++) {
                    try {
                        xmlhttp = XMLHttpFactories[i]();
                    }
                    catch (e) {
                        continue;
                    }
                    break;
                }
                return xmlhttp;
            }
            /* // Exemplo */

            window.addEventListener("load", function(event) {
                var teste = document.getElementById('testeJavascript');
                teste.innerHTML = 'OK';
                testePHP();
            });
        </script>
    </body>
</html>